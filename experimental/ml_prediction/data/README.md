# Data Directory

This directory is for storing stock data used in training and evaluation.

## Directory Structure

```
data/
├── stocks/              # Place individual stock CSV files here
│   ├── AAPL.csv
│   ├── MSFT.csv
│   ├── GOOGL.csv
│   └── ... (more stocks)
└── combined_stocks.csv  # Generated by aggregate_data.py
```

## Stock CSV Format

Each stock CSV file should have the following format:

```csv
Date,Open,High,Low,Close,Volume
1/2/2015 17:30:00,71.43,71.68,71.05,71.33,611903
1/5/2015 17:30:00,71.2,71.28,70.6,70.75,410586
1/7/2015 17:30:00,69.55,69.6,67.5,68.4,2140213
...
```

### Requirements

- **Date column**: Any parseable date format
- **OHLCV columns**: Open, High, Low, Close, Volume
- **Column names**: Case-insensitive (Open/OPEN/open all work)
- **Minimum rows**: 250+ (more is better, ideally 2000+)
- **Date range**: Longer history improves model generalization

### Supported Column Name Variations

The aggregation script handles various naming conventions:
- Date: `Date`, `DATE`, `date`
- Open: `Open`, `OPEN`, `open`
- High: `High`, `HIGH`, `high`
- Low: `Low`, `LOW`, `low`
- Close: `Close`, `CLOSE`, `close`, `Close*`, `Adj Close`
- Volume: `Volume`, `VOLUME`, `volume`, `Vol.`

## Usage

### 1. Add Stock Files

Place your stock CSV files in the `stocks/` directory:

```bash
# Example structure
experimental/ml_prediction/data/stocks/
├── AAPL.csv      # Apple Inc.
├── MSFT.csv      # Microsoft
├── GOOGL.csv     # Google
├── AMZN.csv      # Amazon
└── TSLA.csv      # Tesla
```

### 2. Aggregate Data

Run the aggregation script to combine all stocks:

```bash
cd experimental/ml_prediction
python aggregate_data.py --input_dir data/stocks --output_file data/combined_stocks.csv
```

This creates `data/combined_stocks.csv` with all stocks combined and a `stock_id` column added.

### 3. Train Model

Use the combined data for training:

```bash
python train_multi_stock.py --data_file data/combined_stocks.csv --model_name my_model
```

## Tips

- **Diversity**: Use stocks from different sectors for better generalization
- **Quality**: Ensure data is clean (no missing dates, anomalies checked)
- **Quantity**: More stocks = better model (5-10 minimum, 20+ ideal)
- **History**: Longer time series = more training examples (aim for 2000+ rows per stock)

## Example: Downloading Data

You can download historical stock data from various sources:

- **Yahoo Finance**: https://finance.yahoo.com/
- **Alpha Vantage**: https://www.alphavantage.co/
- **IEX Cloud**: https://iexcloud.io/
- **Quandl**: https://www.quandl.com/

Most providers offer CSV export in OHLCV format.
